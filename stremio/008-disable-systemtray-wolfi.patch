Subject: Completely disable SystemTray to prevent QtWebEngine SIGTRAP
Upstream: No (Wolfi/container-specific fix)
Author: Juan Manuel MÃ©ndez Rey <vejeta@gmail.com>

SystemTray causes QtWebEngine to crash with SIGTRAP when D-Bus is unavailable.
This patch completely removes SystemTray calls and disables the Connections block.

Changes:
- Comment out systemTray.hideIconTray() call in quitApp()
- Disable Connections block by setting target to null (no 'enabled' property for Qt 5.2)
- Comment out systemTray method calls in onSignalIconMenuAboutToShow()
- Comment out systemTray.alwaysOnTopEnabled() call in onVisibilityChanged

This patch is generated based on the state AFTER applying patches 001-007,
following the sequential patch methodology documented in MELANGE_PATCHING_SOLUTION.md

---
diff --git a/main.qml b/main.qml
index 870fcc7..33b953d 100644
--- a/main.qml
+++ b/main.qml
@@ -166,21 +166,23 @@ ApplicationWindow {
     function quitApp() {
         root.quitting = true;
         webView.destroy();
-        systemTray.hideIconTray();
+        // SystemTray disabled for Wolfi - causes SIGTRAP without D-Bus
+        // systemTray.hideIconTray();
         streamingServer.kill();
         streamingServer.waitForFinished(1500);
         Qt.quit();
     }
 
-    /* With help Connections object
+    /* SystemTray Connections disabled for Wolfi - causes SIGTRAP without D-Bus
+     * With help Connections object
      * set connections with System tray class
      * */
     Connections {
-        target: systemTray
+        target: null  // SystemTray disabled
 
         function onSignalIconMenuAboutToShow() {
-            systemTray.updateIsOnTop((root.flags & Qt.WindowStaysOnTopHint) === Qt.WindowStaysOnTopHint);
-	        systemTray.updateVisibleAction(root.visible);
+            // systemTray.updateIsOnTop((root.flags & Qt::WindowStaysOnTopHint) === Qt::WindowStaysOnTopHint);
+	        // systemTray.updateVisibleAction(root.visible);
         }
 
         function onSignalShow() {
@@ -199,12 +201,12 @@ ApplicationWindow {
                 root.flags |= Qt.WindowStaysOnTopHint;
             }
         }
- 
+
         // The signal - close the application by ignoring the check-box
         function onSignalQuit() {
             quitApp();
         }
- 
+
         // Minimize / maximize the window by clicking on the default system tray
         function onSignalIconActivated() {
            showWindow();
@@ -612,7 +614,8 @@ ApplicationWindow {
 
     onVisibilityChanged: {
         var enabledAlwaysOnTop = root.visible && root.visibility != Window.FullScreen;
-        systemTray.alwaysOnTopEnabled(enabledAlwaysOnTop);
+        // SystemTray disabled for Wolfi
+        // systemTray.alwaysOnTopEnabled(enabledAlwaysOnTop);
         if (!enabledAlwaysOnTop) {
             root.flags &= ~Qt.WindowStaysOnTopHint;
         }
